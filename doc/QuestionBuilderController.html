<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: QuestionBuilderController
  
    &mdash; Documentation by YARD 0.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (Q)</a> &raquo; 
    
    
    <span class="title">QuestionBuilderController</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: QuestionBuilderController
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></li>
          
            <li class="next">QuestionBuilderController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/controllers/question_builder_controller.rb</dd>
  
</dl>
<div class="clear"></div>



  
  
  
  
  


  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_choice-instance_method" title="#add_choice (instance method)">- (Object) <strong>add_choice</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
add_choice add a choice for the given question.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cancel_editing-instance_method" title="#cancel_editing (instance method)">- (Object) <strong>cancel_editing</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
cancel_editing cancel the editing of question.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#edit_question-instance_method" title="#edit_question (instance method)">- (Object) <strong>edit_question</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
edit_question given a question id and model name, create the form for
editing the current question.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_camel_caps-instance_method" title="#get_camel_caps (instance method)">- (Object) <strong>get_camel_caps</strong>(input) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
with eval to hit the database table.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_choice-instance_method" title="#remove_choice (instance method)">- (Object) <strong>remove_choice</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
remove_choice remove a choice from the question.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_question-instance_method" title="#remove_question (instance method)">- (Object) <strong>remove_question</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
remove_question remove a given question from an extraction form called by
question_builder/destroy shared/render_partial.js.erb.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shift_numbers-instance_method" title="#shift_numbers (instance method)">- (Object) <strong>shift_numbers</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
shift_numbers when a user selects to move a question up or down the list,
update the ordering.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show_input_options-instance_method" title="#show_input_options (instance method)">- (Object) <strong>show_input_options</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
show_input_options Show options associated with the input method they
chose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show_input_options_during_edit-instance_method" title="#show_input_options_during_edit (instance method)">- (Object) <strong>show_input_options_during_edit</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Show options associated with the input method they choose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show_subquestion-instance_method" title="#show_subquestion (instance method)">- (Object) <strong>show_subquestion</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
show_subquestion when a user selects an radio-button-formatted answer to
the question, check to see  if that field has an associated subquestion.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show_subquestion_assignment-instance_method" title="#show_subquestion_assignment (instance method)">- (Object) <strong>show_subquestion_assignment</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
get_subquestion_assignment determine which options should have the
subquestion assigned to them.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationController.html#escape_quotes-instance_method" title="ApplicationController#escape_quotes (method)">#escape_quotes</a></span>, <span class='object_link'><a href="ApplicationController.html#set_as_current-instance_method" title="ApplicationController#set_as_current (method)">#set_as_current</a></span>, <span class='object_link'><a href="ApplicationController.html#show_other-instance_method" title="ApplicationController#show_other (method)">#show_other</a></span>, <span class='object_link'><a href="ApplicationController.html#show_other_filled-instance_method" title="ApplicationController#show_other_filled (method)">#show_other_filled</a></span>, <span class='object_link'><a href="ApplicationController.html#toggle_ahrq_header-instance_method" title="ApplicationController#toggle_ahrq_header (method)">#toggle_ahrq_header</a></span></p>

  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="add_choice-instance_method">
  
    - (<tt>Object</tt>) <strong>add_choice</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
add_choice add a choice for the given question
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_choice'>add_choice</span>
	<span class='ivar'>@previous_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>previous_row</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='ivar'>@has_sub</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:has_sub</span><span class='rbracket'>]</span>
	<span class='ivar'>@page_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>page_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_choices</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@question_number</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:question_number</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_previous_array'>previous_array</span> <span class='op'>=</span> <span class='ivar'>@previous_id</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='id identifier rubyid_previous'>previous</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_array'>previous_array</span><span class='lbracket'>[</span><span class='id identifier rubyid_previous_array'>previous_array</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span>
<span class='ivar'>@row_id</span> <span class='op'>=</span> <span class='id identifier rubyid_previous'>previous</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='int'>1</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:editing</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span>
		<span class='ivar'>@q_num</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_array'>previous_array</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
		<span class='ivar'>@partial</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/editing_option_text_input</span><span class='tstring_end'>&quot;</span></span>
	<span class='kw'>else</span>
		<span class='ivar'>@partial</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/option_text_input</span><span class='tstring_end'>&quot;</span></span>
	<span class='kw'>end</span>
	<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>question_builder/add_choice.js.erb</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cancel_editing-instance_method">
  
    - (<tt>Object</tt>) <strong>cancel_editing</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
cancel_editing cancel the editing of question
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cancel_editing'>cancel_editing</span>
	<span class='ivar'>@model</span><span class='op'>=</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:page_name</span><span class='rbracket'>]</span>	
	<span class='ivar'>@question</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_get_camel_caps'>get_camel_caps</span><span class='lparen'>(</span><span class='ivar'>@model</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:qid</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	
	<span class='comment'># this partial will make use of the @question and @model defined above	
</span>	<span class='ivar'>@table_container</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>question_</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='ivar'>@question</span><span class='period'>.</span><span class='id identifier rubyid_question_number'>question_number</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_div</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@table_partial</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/show_question</span><span class='tstring_end'>&quot;</span></span>
	<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>shared/saved.js.erb</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="edit_question-instance_method">
  
    - (<tt>Object</tt>) <strong>edit_question</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
edit_question given a question id and model name, create the form for
editing the current question.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_edit_question'>edit_question</span>
	<span class='id identifier rubyid_qid'>qid</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:qid</span><span class='rbracket'>]</span>
	<span class='ivar'>@qnum</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:qnum</span><span class='rbracket'>]</span>
	<span class='ivar'>@model</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:page_name</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='id identifier rubyid_get_camel_caps'>get_camel_caps</span><span class='lparen'>(</span><span class='ivar'>@model</span><span class='rparen'>)</span>
	<span class='ivar'>@question</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_qid'>qid</span><span class='rparen'>)</span>
	<span class='ivar'>@fields</span> <span class='op'>=</span> <span class='ivar'>@question</span><span class='period'>.</span><span class='id identifier rubyid_get_fields'>get_fields</span>
	<span class='ivar'>@has_study_data</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_has_study_data'>has_study_data</span><span class='lparen'>(</span><span class='id identifier rubyid_qid'>qid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_camel_caps-instance_method">
  
    - (<tt>Object</tt>) <strong>get_camel_caps</strong>(input) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
with eval to hit the database table. example: design_detail would give
DesignDetail
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


130
131
132
133
134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 130</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_camel_caps'>get_camel_caps</span> <span class='id identifier rubyid_input'>input</span>
<span class='id identifier rubyid_tmp'>tmp</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_tmp'>tmp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
	<span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_downcase!'>downcase!</span>
	<span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_capitalize!'>capitalize!</span>
<span class='kw'>end</span>
<span class='kw'>return</span> <span class='id identifier rubyid_tmp'>tmp</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_choice-instance_method">
  
    - (<tt>Object</tt>) <strong>remove_choice</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
remove_choice remove a choice from the question
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_choice'>remove_choice</span>
	
	<span class='kw'>unless</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:editing</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span>
		<span class='ivar'>@div_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>row_</span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>row_num</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_div</span><span class='tstring_end'>&quot;</span></span>
	<span class='kw'>else</span>
		<span class='ivar'>@div_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>q_</span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:qnum</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_row_</span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>row_num</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_div</span><span class='tstring_end'>&quot;</span></span>
		<span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>div_name is </span><span class='embexpr_beg'>#{</span><span class='ivar'>@div_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_content'>\n\n</span><span class='tstring_end'>&quot;</span></span>
		<span class='ivar'>@model</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:page_name</span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='id identifier rubyid_get_camel_caps'>get_camel_caps</span><span class='lparen'>(</span><span class='ivar'>@model</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_field_obj'>field_obj</span> <span class='op'>=</span> <span class='id identifier rubyid_obj'>obj</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Field</span><span class='tstring_end'>&quot;</span></span>
		<span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\n\nPARAMS[:FIELD ID] is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:field_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_content'>\n\n\n</span><span class='tstring_end'>&quot;</span></span>
		<span class='kw'>unless</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:field_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:field_id</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>
			<span class='id identifier rubyid_tmp'>tmp</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_field_obj'>field_obj</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:field_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
			
			<span class='id identifier rubyid_tmp'>tmp</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span><span class='lparen'>(</span><span class='rparen'>)</span>
		<span class='kw'>end</span>
	<span class='kw'>end</span>
	<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>question_builder/remove_choice.js.erb</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_question-instance_method">
  
    - (<tt>Object</tt>) <strong>remove_question</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
remove_question remove a given question from an extraction form called by
question_builder/destroy shared/render_partial.js.erb
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_question'>remove_question</span>
	<span class='id identifier rubyid_question_id'>question_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>qid</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_page_name'>page_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>page_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_obj_name'>obj_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_camel_caps'>get_camel_caps</span><span class='lparen'>(</span><span class='id identifier rubyid_page_name'>page_name</span><span class='rparen'>)</span>
	<span class='ivar'>@obj</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_obj_name'>obj_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_question_id'>question_id</span><span class='rparen'>)</span>
	<span class='ivar'>@extraction_form</span> <span class='op'>=</span> <span class='const'>ExtractionForm</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='ivar'>@obj</span><span class='period'>.</span><span class='id identifier rubyid_extraction_form_id'>extraction_form_id</span><span class='rparen'>)</span>
	<span class='kw'>unless</span> <span class='ivar'>@obj</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
		<span class='const'>ExtractionForm</span><span class='period'>.</span><span class='id identifier rubyid_update_question_numbers_after_delete'>update_question_numbers_after_delete</span><span class='lparen'>(</span><span class='id identifier rubyid_obj_name'>obj_name</span><span class='comma'>,</span><span class='ivar'>@obj</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='ivar'>@extraction_form</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
		<span class='comment'># depending on what the object name comes out to be, call the remove_question
</span>		<span class='ivar'>@obj</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span>
	<span class='kw'>end</span>
<span class='ivar'>@questions</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_obj_name'>obj_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:extraction_form_id</span><span class='op'>=&gt;</span><span class='ivar'>@obj</span><span class='period'>.</span><span class='id identifier rubyid_extraction_form_id'>extraction_form_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_number ASC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='ivar'>@model</span> <span class='op'>=</span> <span class='id identifier rubyid_page_name'>page_name</span>
<span class='kw'>if</span> <span class='lparen'>(</span><span class='ivar'>@model</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baseline_characteristic</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='ivar'>@div_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>extraction_form_preview_table_bc</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@message_div</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>removed_item_indicator_bc</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span>
	<span class='ivar'>@div_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>extraction_form_preview_table_dd</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@message_div</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>removed_item_indicator_dd</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='ivar'>@partial_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/extraction_form_preview</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>shared/render_partial.js.erb</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="shift_numbers-instance_method">
  
    - (<tt>Object</tt>) <strong>shift_numbers</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
shift_numbers when a user selects to move a question up or down the list,
update the ordering
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shift_numbers'>shift_numbers</span>
	<span class='comment'># get the number (X) off of 'question_number_X'
</span>	<span class='ivar'>@extraction_form</span> <span class='op'>=</span> <span class='const'>ExtractionForm</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:extraction_form_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_current_number'>current_number</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>selector_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_desired_number'>desired_number</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new_row_num</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='ivar'>@model</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>page_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='ivar'>@obj_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_camel_caps'>get_camel_caps</span><span class='lparen'>(</span><span class='ivar'>@model</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_extraction_form'>extraction_form</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:extraction_form_id</span><span class='rbracket'>]</span>
	<span class='const'>ExtractionForm</span><span class='period'>.</span><span class='id identifier rubyid_shift_questions'>shift_questions</span><span class='lparen'>(</span><span class='id identifier rubyid_current_number'>current_number</span><span class='comma'>,</span> <span class='id identifier rubyid_desired_number'>desired_number</span><span class='comma'>,</span> <span class='ivar'>@obj_name</span><span class='comma'>,</span> <span class='id identifier rubyid_extraction_form'>extraction_form</span><span class='rparen'>)</span>
	<span class='ivar'>@questions</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='ivar'>@obj_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:extraction_form_id</span><span class='op'>=&gt;</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:extraction_form_id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_number ASC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>if</span> <span class='lparen'>(</span><span class='ivar'>@model</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baseline_characteristic</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='ivar'>@div_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>extraction_form_preview_table_bc</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span>
	<span class='ivar'>@div_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>extraction_form_preview_table_dd</span><span class='tstring_end'>&quot;</span></span>	
<span class='kw'>end</span>
<span class='ivar'>@partial_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/extraction_form_preview</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>shared/render_partial.js.erb</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="show_input_options-instance_method">
  
    - (<tt>Object</tt>) <strong>show_input_options</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
show_input_options Show options associated with the input method they
chose. input method can be small_text, big_text, select, radio, checkbox
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_show_input_options'>show_input_options</span>
	<span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>selected</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='ivar'>@is_select</span> <span class='op'>=</span> <span class='kw'>false</span>
	<span class='ivar'>@row_id</span> <span class='op'>=</span> <span class='int'>1</span>
	<span class='ivar'>@page_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>page_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_choices</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@model</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>page_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>select</span><span class='tstring_end'>&quot;</span></span>
		<span class='ivar'>@is_select</span> <span class='op'>=</span> <span class='kw'>true</span>
	<span class='kw'>end</span>
	
	<span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>yesno</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@div_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type_selector_</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='ivar'>@page_name</span>
	<span class='ivar'>@partial_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/show_yes_no_inputs</span><span class='tstring_end'>&quot;</span></span>
		<span class='ivar'>@selection_field_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='ivar'>@page_name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_field_type</span><span class='tstring_end'>&quot;</span></span>
	<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>question_builder/yesno_entry.js.erb</span><span class='tstring_end'>'</span></span>
<span class='kw'>elsif</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text</span><span class='tstring_end'>&quot;</span></span>
		<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>question_builder/remove_choices_entry.js.erb</span><span class='tstring_end'>'</span></span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>question_builder/show_choices_entry.js.erb</span><span class='tstring_end'>'</span></span>
	<span class='kw'>end</span>	
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="show_input_options_during_edit-instance_method">
  
    - (<tt>Object</tt>) <strong>show_input_options_during_edit</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Show options associated with the input method they choose. for this method
they are updating an already existing question/answer set
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_show_input_options_during_edit'>show_input_options_during_edit</span>
	<span class='id identifier rubyid_selection'>selection</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:selected</span><span class='rbracket'>]</span>
	<span class='ivar'>@q_num</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:q_num</span><span class='rbracket'>]</span>
	<span class='ivar'>@q_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:q_id</span><span class='rbracket'>]</span>
	<span class='ivar'>@choices_div</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:choices_div</span><span class='rbracket'>]</span>
	<span class='ivar'>@button_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#q_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@q_num</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_content'>_choice_button</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@field_type_div</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#q_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@q_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_content'>_field_type_div</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@page_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>page_name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_choices</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@model</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>page_name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_selection'>selection</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>text</span><span class='tstring_end'>'</span></span>
	<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/disable_div.js.erb</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span>
		<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>question_builder/show_choices_entry_during_edit.js.erb</span><span class='tstring_end'>'</span></span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="show_subquestion-instance_method">
  
    - (<tt>Object</tt>) <strong>show_subquestion</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
show_subquestion when a user selects an radio-button-formatted answer to
the question, check to see  if that field has an associated subquestion. If
it does, hide any previously shown  fields and show the correct one. The
javascript rendered will change depending on the type of input being used.
For  example, a select element will require different actions than a radio
button or checkbox.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_show_subquestion'>show_subquestion</span>
	<span class='ivar'>@model</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span>
	<span class='ivar'>@option_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:option_id</span><span class='rbracket'>]</span>
	<span class='ivar'>@obj_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:obj_id</span><span class='rbracket'>]</span>
	
	<span class='comment'># only the baseline characteristic will use the arm_id. leave it blank otherwise
</span>	<span class='ivar'>@arm_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:arm_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:arm_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
	
	<span class='id identifier rubyid_db_table'>db_table</span> <span class='op'>=</span> <span class='id identifier rubyid_get_camel_caps'>get_camel_caps</span><span class='lparen'>(</span><span class='ivar'>@model</span><span class='rparen'>)</span>
	<span class='ivar'>@input_type</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:input_type</span><span class='rbracket'>]</span>
	<span class='ivar'>@has_sq</span> <span class='op'>=</span> <span class='kw'>false</span>
	<span class='id identifier rubyid_data_field'>data_field</span> <span class='op'>=</span> <span class='kw'>nil</span>
	<span class='kw'>unless</span> <span class='ivar'>@input_type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>select-one</span><span class='tstring_end'>&quot;</span></span>
		<span class='id identifier rubyid_data_field'>data_field</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_db_table'>db_table</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Field</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='ivar'>@option_id</span><span class='rparen'>)</span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_ref_id'>ref_id</span> <span class='op'>=</span> <span class='ivar'>@model</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span>
		<span class='id identifier rubyid_data_field'>data_field</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_db_table'>db_table</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Field</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_ref_id'>ref_id</span><span class='op'>=&gt;</span><span class='ivar'>@obj_id</span><span class='comma'>,</span> <span class='symbol'>:option_text</span><span class='op'>=&gt;</span><span class='ivar'>@option_id</span><span class='rparen'>)</span>
		<span class='kw'>unless</span> <span class='id identifier rubyid_data_field'>data_field</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
			<span class='id identifier rubyid_data_field'>data_field</span> <span class='op'>=</span> <span class='id identifier rubyid_data_field'>data_field</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
			
		<span class='kw'>else</span>
			<span class='id identifier rubyid_data_field'>data_field</span> <span class='op'>=</span> <span class='kw'>nil</span>
		<span class='kw'>end</span>
	<span class='kw'>end</span>
	<span class='kw'>if</span> <span class='ivar'>@input_type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>select-one</span><span class='tstring_end'>&quot;</span></span>
	<span class='ivar'>@element_to_fill</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#select_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@obj_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='ivar'>@arm_id</span><span class='rbrace'>}</span><span class='tstring_content'>_sq_span</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span>
	<span class='ivar'>@element_to_fill</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#option_</span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='ivar'>@option_id</span> <span class='op'>+</span> <span class='ivar'>@arm_id</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_sq_span</span><span class='tstring_end'>&quot;</span></span>	
<span class='kw'>end</span>
	<span class='kw'>unless</span> <span class='id identifier rubyid_data_field'>data_field</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
		<span class='ivar'>@has_sq</span> <span class='op'>=</span> <span class='id identifier rubyid_data_field'>data_field</span><span class='period'>.</span><span class='id identifier rubyid_has_subquestion'>has_subquestion</span>
		<span class='ivar'>@group_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.radio_group_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@obj_id</span> <span class='op'>+</span> <span class='ivar'>@arm_id</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
		<span class='ivar'>@option_id</span> <span class='op'>=</span> <span class='id identifier rubyid_data_field'>data_field</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
		<span class='kw'>if</span> <span class='ivar'>@has_sq</span>
 		<span class='ivar'>@subquestion</span> <span class='op'>=</span> <span class='id identifier rubyid_data_field'>data_field</span><span class='period'>.</span><span class='id identifier rubyid_subquestion'>subquestion</span>
 		<span class='kw'>if</span> <span class='ivar'>@input_type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>checkbox</span><span class='tstring_end'>&quot;</span></span>
 			<span class='ivar'>@checked</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:checked</span><span class='rbracket'>]</span>
 		<span class='kw'>end</span>
 	<span class='kw'>end</span>
	<span class='kw'>else</span>
	<span class='kw'>end</span>
	
	<span class='id identifier rubyid_js_partial'>js_partial</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='ivar'>@input_type</span>
<span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>radio</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>yesno</span><span class='tstring_end'>&quot;</span></span>
	<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/subquestions/show_subquestion_for_radio</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>checkbox</span><span class='tstring_end'>&quot;</span></span>
	<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/subquestions/show_subquestion_for_checkbox</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>select-one</span><span class='tstring_end'>&quot;</span></span>
	<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>question_builder/subquestions/show_subquestion_for_select</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span>
	<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_render'>render</span> <span class='id identifier rubyid_js_partial'>js_partial</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="show_subquestion_assignment-instance_method">
  
    - (<tt>Object</tt>) <strong>show_subquestion_assignment</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
get_subquestion_assignment determine which options should have the
subquestion assigned to them
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/question_builder_controller.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_show_subquestion_assignment'>show_subquestion_assignment</span>
	<span class='ivar'>@num_options</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:num_options</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
	<span class='ivar'>@div_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:div_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#subquestion_text_div</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:div_id</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>question_builder/subquestions/show_subquestion_assignment</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Feb  1 16:26:53 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.4 (ruby-1.9.2).
</div>

  </body>
</html>