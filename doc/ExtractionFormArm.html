<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: ExtractionFormArm
  
    &mdash; Documentation by YARD 0.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo; 
    
    
    <span class="title">ExtractionFormArm</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ExtractionFormArm
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">ExtractionFormArm</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/models/extraction_form_arm.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
An extraction form has an &#8216;arms&#8217; section in which the
extraction form creator can &#8220;suggest&#8221; arm titles for data
extractors to use. The titles are not binding and only show up in the drop
down menu of the arms form in the study data extraction section.
</p>


  </div>
</div>
<div class="tags">
  

</div>

  


  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_arms_array-class_method" title="get_arms_array (class method)">+ (array) <strong>get_arms_array</strong>(efid) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
get the array of arms for a particular extraction form.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_studies-instance_method" title="#update_studies (instance method)">- (Object) <strong>update_studies</strong>(previous_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
when an arm is updated in the extraction form, update all of the associated
studies.
</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="get_arms_array-class_method">
  
    + (<tt>array</tt>) <strong>get_arms_array</strong>(efid) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
get the array of arms for a particular extraction form
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>efid</span>
      
      
        <span class='type'>(<tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
extraction form id
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
an array of arms and descriptions
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11
12
13
14
15
16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/extraction_form_arm.rb', line 9</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_arms_array'>get_arms_array</span><span class='lparen'>(</span><span class='id identifier rubyid_efid'>efid</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_records'>records</span> <span class='op'>=</span> <span class='const'>ExtractionFormArm</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:extraction_form_id</span><span class='op'>=&gt;</span><span class='id identifier rubyid_efid'>efid</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span>
	<span class='id identifier rubyid_descriptions'>descriptions</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='id identifier rubyid_records'>records</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rec'>rec</span><span class='op'>|</span>
		<span class='id identifier rubyid_descriptions'>descriptions</span><span class='lbracket'>[</span><span class='id identifier rubyid_rec'>rec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_rec'>rec</span><span class='period'>.</span><span class='id identifier rubyid_description'>description</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
	<span class='kw'>end</span>
	<span class='id identifier rubyid_arms'>arms</span> <span class='op'>=</span> <span class='id identifier rubyid_records'>records</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
		
	<span class='kw'>return</span> <span class='lbracket'>[</span><span class='id identifier rubyid_arms'>arms</span><span class='comma'>,</span><span class='id identifier rubyid_descriptions'>descriptions</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="update_studies-instance_method">
  
    - (<tt>Object</tt>) <strong>update_studies</strong>(previous_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
when an arm is updated in the extraction form, update all of the associated
studies
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>previous_name</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the old name of the arm
</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/extraction_form_arm.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_studies'>update_studies</span><span class='lparen'>(</span><span class='id identifier rubyid_previous_name'>previous_name</span><span class='rparen'>)</span>
	<span class='comment'># get information about the extraction form arm
</span>	<span class='id identifier rubyid_arm_name'>arm_name</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
	<span class='id identifier rubyid_arm_description'>arm_description</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_description'>description</span>
	<span class='id identifier rubyid_arm_note'>arm_note</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_note'>note</span>
	<span class='id identifier rubyid_efid'>efid</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_extraction_form_id'>extraction_form_id</span>
	
	<span class='comment'># get the studies that use this extraction form
</span>	<span class='id identifier rubyid_studies'>studies</span> <span class='op'>=</span> <span class='const'>StudyExtractionForm</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:extraction_form_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_efid'>efid</span><span class='rparen'>)</span>
	
	<span class='comment'># for each of the studies using this form, get this default arm
</span>	<span class='kw'>unless</span> <span class='id identifier rubyid_studies'>studies</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
		<span class='id identifier rubyid_studies'>studies</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_study'>study</span><span class='op'>|</span>
			<span class='comment'># get the arm
</span>			<span class='id identifier rubyid_to_edit'>to_edit</span> <span class='op'>=</span> <span class='const'>Arm</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:study_id</span><span class='op'>=&gt;</span><span class='id identifier rubyid_study'>study</span><span class='period'>.</span><span class='id identifier rubyid_study_id'>study_id</span><span class='comma'>,</span><span class='symbol'>:title</span><span class='op'>=&gt;</span><span class='id identifier rubyid_previous_name'>previous_name</span><span class='rparen'>)</span>
			
			<span class='comment'># unless the arm was already deleted previously
</span>			<span class='kw'>unless</span> <span class='id identifier rubyid_to_edit'>to_edit</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
				<span class='id identifier rubyid_to_edit'>to_edit</span> <span class='op'>=</span> <span class='id identifier rubyid_to_edit'>to_edit</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
				
				<span class='comment'># update the attributes
</span>				<span class='id identifier rubyid_to_edit'>to_edit</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='id identifier rubyid_arm_name'>arm_name</span>
				<span class='id identifier rubyid_to_edit'>to_edit</span><span class='period'>.</span><span class='id identifier rubyid_description'>description</span> <span class='op'>=</span> <span class='id identifier rubyid_arm_description'>arm_description</span>
				<span class='id identifier rubyid_to_edit'>to_edit</span><span class='period'>.</span><span class='id identifier rubyid_note'>note</span> <span class='op'>=</span> <span class='id identifier rubyid_arm_note'>arm_note</span>					
				<span class='id identifier rubyid_to_edit'>to_edit</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span> <span class='comment'># end studies.each
</span>	<span class='kw'>end</span> <span class='comment'># end unless studies.empty?
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Feb  1 16:26:49 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.4 (ruby-1.9.2).
</div>

  </body>
</html>